/*!
 * image-process v0.0.1
 * (c) 2017-2017 dailc
 * Released under the MIT License.
 * https://github.com/dailc/image-process
 */
!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.ImageProcess=r()}(this,function(){"use strict";function t(t,r,a,o,i,n){for(var e=i/r,h=n/a,f=o,v=0;v<i;v+=1)for(var d=0;d<n;d+=1)!function(o,n){var v=Math.min(r-1,o/e),d=Math.min(a-1,n/h),u=Math.floor(v),c=Math.floor(d),g=n*i+o,m=c*r+u;g*=4,m*=4;for(var M=0;M<=3;M+=1)f[g+M]=t[m+M]}(v,d)}function r(r,a){return t(r.data,r.width,r.height,a.data,a.width,a.height),a}function a(t,r,a,o,i){var n=o,e=i;n>=a?n=a-1:n<0&&(n=0),e>=r?e=r-1:e<0&&(e=0);var h=n*r+e;return h*=4,[t[h+0],t[h+1],t[h+2],t[h+3]]}function o(t,r,o,i,n,e){for(var h=n/r,f=e/o,v=i,d=0;d<n;d+=1)for(var u=0;u<e;u+=1)!function(i,e){var d=Math.min(r-1,i/h),u=Math.min(o-1,e/f),c=Math.floor(d),g=Math.floor(u),m=d-c,M=u-g,l=1-m,s=1-M,w=e*n+i;w*=4;for(var p=a(t,r,o,g+0,c+0),y=a(t,r,o,g+0,c+1),I=a(t,r,o,g+1,c+0),x=a(t,r,o,g+1,c+1),D=0;D<=3;D+=1){var E=M*(l*I[D]+m*x[D]),b=s*(l*p[D]+m*y[D]);v[w+D]=E+b}}(d,u)}function i(t,r){return o(t.data,t.width,t.height,r.data,r.width,r.height),r}function n(t,r,a,o,i,n){for(var e=o,h=i/r,f=n/a,v=0;v<i;v+=1)for(var d=0;d<n;d+=1)!function(o,n){var v=Math.min(r-1,o/h),d=Math.min(a-1,n/f),u=Math.floor(v),c=Math.floor(d),g=v-u,m=d-c,M=n*i+o;M*=4;for(var l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<=3;s+=1){for(var w=-1;w<=2;w+=1)for(var p=-1;p<=2;p+=1)l[w+1][p+1]=A(t,r,a,c+w,u+p,s);L(l),e[M+s]=C(O(m,g))}}(v,d)}function e(t,r){return n(t.data,t.width,t.height,r.data,r.width,r.height),r}function h(t){var r=t>=0?t:-t,a=t*t,o=r*a;return r<=1?1-(P+3)*a+(P+2)*o:r<=2?-4*P+8*P*r-5*P*a+P*o:0}function f(t){var r=t;return r=Math.min(255,r),r=Math.max(0,r)}function v(t,r,a,o,i){var n=o,e=i;n>=a?n=a-1:n<0&&(n=0),e>=r?e=r-1:e<0&&(e=0);var h=n*r+e;return h*=4,[t[h+0],t[h+1],t[h+2],t[h+3]]}function d(t,r,a,o,i,n){for(var e=o,d=i/r,u=n/a,c=0;c<i;c+=1)for(var g=0;g<n;g+=1)!function(o,n){var c=Math.min(r-1,o/d),g=Math.min(a-1,n/u),m=Math.floor(c),M=Math.floor(g),l=c-m,s=g-M,w=n*i+o;w*=4;for(var p=[0,0,0,0],y=-1;y<=2;y+=1)for(var I=-1;I<=2;I+=1){var x=v(t,r,a,M+y,m+I),D=h(y-s)*h(I-l);p[0]+=x[0]*D,p[1]+=x[1]*D,p[2]+=x[2]*D,p[3]+=x[3]*D}e[w+0]=f(p[0]),e[w+1]=f(p[1]),e[w+2]=f(p[2]),e[w+3]=f(p[3])}(c,g)}function u(t,r){return d(t.data,t.width,t.height,r.data,r.width,r.height),r}function c(t){for(var r=t,a=arguments.length,o=Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return o.forEach(function(t){t&&Object.keys(t).forEach(function(a){r[a]=t[a]})}),r}var g=void 0,m=void 0,M=void 0,l=void 0,s=void 0,w=void 0,p=void 0,y=void 0,I=void 0,x=void 0,D=void 0,E=void 0,b=void 0,j=void 0,T=void 0,k=void 0,A=function(t,r,a,o,i,n){var e=o,h=i;e>=a?e=a-1:e<0&&(e=0),h>=r?h=r-1:h<0&&(h=0);var f=e*r+h;return f*=4,t[f+n]},C=function(t){var r=t;return r=Math.min(255,r),r=Math.max(0,r)},L=function(t){var r=t;g=r[1][1],m=-.5*r[1][0]+.5*r[1][2],M=r[1][0]-2.5*r[1][1]+2*r[1][2]-.5*r[1][3],l=-.5*r[1][0]+1.5*r[1][1]-1.5*r[1][2]+.5*r[1][3],s=-.5*r[0][1]+.5*r[2][1],w=.25*r[0][0]-.25*r[0][2]-.25*r[2][0]+.25*r[2][2],p=-.5*r[0][0]+1.25*r[0][1]-r[0][2]+.25*r[0][3]+.5*r[2][0]-1.25*r[2][1]+r[2][2]-.25*r[2][3],y=.25*r[0][0]-.75*r[0][1]+.75*r[0][2]-.25*r[0][3]-.25*r[2][0]+.75*r[2][1]-.75*r[2][2]+.25*r[2][3],I=r[0][1]-2.5*r[1][1]+2*r[2][1]-.5*r[3][1],x=-.5*r[0][0]+.5*r[0][2]+1.25*r[1][0]-1.25*r[1][2]-r[2][0]+r[2][2]+.25*r[3][0]-.25*r[3][2],D=r[0][0]-2.5*r[0][1]+2*r[0][2]-.5*r[0][3]-2.5*r[1][0]+6.25*r[1][1]-5*r[1][2]+1.25*r[1][3]+2*r[2][0]-5*r[2][1]+4*r[2][2]-r[2][3]-.5*r[3][0]+1.25*r[3][1]-r[3][2]+.25*r[3][3],E=-.5*r[0][0]+1.5*r[0][1]-1.5*r[0][2]+.5*r[0][3]+1.25*r[1][0]-3.75*r[1][1]+3.75*r[1][2]-1.25*r[1][3]-r[2][0]+3*r[2][1]-3*r[2][2]+r[2][3]+.25*r[3][0]-.75*r[3][1]+.75*r[3][2]-.25*r[3][3],b=-.5*r[0][1]+1.5*r[1][1]-1.5*r[2][1]+.5*r[3][1],j=.25*r[0][0]-.25*r[0][2]-.75*r[1][0]+.75*r[1][2]+.75*r[2][0]-.75*r[2][2]-.25*r[3][0]+.25*r[3][2],T=-.5*r[0][0]+1.25*r[0][1]-r[0][2]+.25*r[0][3]+1.5*r[1][0]-3.75*r[1][1]+3*r[1][2]-.75*r[1][3]-1.5*r[2][0]+3.75*r[2][1]-3*r[2][2]+.75*r[2][3]+.5*r[3][0]-1.25*r[3][1]+r[3][2]-.25*r[3][3],k=.25*r[0][0]-.75*r[0][1]+.75*r[0][2]-.25*r[0][3]-.75*r[1][0]+2.25*r[1][1]-2.25*r[1][2]+.75*r[1][3]+.75*r[2][0]-2.25*r[2][1]+2.25*r[2][2]-.75*r[2][3]-.25*r[3][0]+.75*r[3][1]-.75*r[3][2]+.25*r[3][3]},O=function(t,r){var a=t*t,o=r*r,i=o*r;return g+m*r+M*o+l*i+(s+w*r+p*o+y*i)*t+(I+x*r+D*o+E*i)*a+(b+j*r+T*o+k*i)*(a*t)},P=-1,R={width:80,height:80,mime:"image/png",processType:0},U={};return function(t){t.scaleImage=function(t,a){var o=t.width,n=t.height,h=c({},R,a),f=[r,i,e,u],v=document.createElement("canvas"),d=v.getContext("2d");v.width=o,v.height=n,d.drawImage(t,0,0,o,n);var g=d.getImageData(0,0,o,n),m=d.createImageData(h.width,h.height);return m=f[h.processType](g,m,h),v.width=m.width,v.height=m.height,d.putImageData(m,0,0,0,0,v.width,v.height),console.log(g),console.log(m),v.toDataURL(h.mime,.9)}}(U),U});
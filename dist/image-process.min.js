/*!
 * image-process v0.0.1
 * (c) 2017-2017 dailc
 * Released under the MIT License.
 * https://github.com/dailc/image-process
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.ImageProcess=i()}(this,function(){"use strict";function t(t,i,o,a,r,n){for(var e=r/i,h=n/o,d=a,f=0;f<r;f+=1)for(var v=0;v<n;v+=1)!function(a,n){var f=Math.min(i-1,a/e),v=Math.min(o-1,n/h),u=Math.floor(f),c=Math.floor(v),g=n*r+a,m=c*i+u;g*=4,m*=4;for(var s=0;s<=3;s+=1)d[g+s]=t[m+s]}(f,v)}function i(i,o){return t(i.data,i.width,i.height,o.data,o.width,o.height),o}function o(t,i,o,a,r,n){for(var e=r/i,h=n/o,d=a,f=0;f<r;f+=1)for(var v=0;v<n;v+=1)!function(a,n){var f=Math.min(i-1,a/e),v=Math.min(o-1,n/h),u=Math.floor(f),c=Math.floor(v),g=f-u,m=v-c,s=1-g,w=1-m,M=n*r+a,l=c*i+u,p=void 0,y=void 0,I=void 0;y=u<i-1?l+1:l,c<o-1?(p=l+i,I=y+i):(p=l,I=y),M*=4,l*=4,p*=4,y*=4,I*=4;for(var x=0;x<=3;x+=1){var D=m*(s*t[p+x]+g*t[I+x]),E=w*(s*t[l+x]+g*t[y+x]);d[M+x]=D+E}}(f,v)}function a(t,i){return o(t.data,t.width,t.height,i.data,i.width,i.height),i}function r(t,i,o,a,r,n){for(var e=a,h=r/i,d=n/o,f=0;f<r;f+=1)for(var v=0;v<n;v+=1)!function(a,n){var f=Math.min(i-1,a/h),v=Math.min(o-1,n/d),u=Math.floor(f),c=Math.floor(v),g=f-u,m=v-c,s=n*r+a;s*=4;for(var w=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],M=0;M<=3;M+=1){for(var l=0;l<=3;l+=1)w[l][0]=D(t,i,o,c-1+l,u-1,M),w[l][1]=D(t,i,o,c-1+l,u,M),w[l][2]=D(t,i,o,c-1+l,u+1,M),w[l][3]=D(t,i,o,c-1+l,u+2,M);b(w),e[s+M]=E(j(m,g))}}(f,v)}function n(t,i){return r(t.data,t.width,t.height,i.data,i.width,i.height),i}function e(t){for(var i=t,o=arguments.length,a=Array(o>1?o-1:0),r=1;r<o;r++)a[r-1]=arguments[r];return a.forEach(function(t){t&&Object.keys(t).forEach(function(o){i[o]=t[o]})}),i}var h=void 0,d=void 0,f=void 0,v=void 0,u=void 0,c=void 0,g=void 0,m=void 0,s=void 0,w=void 0,M=void 0,l=void 0,p=void 0,y=void 0,I=void 0,x=void 0,D=function(t,i,o,a,r,n){var e=a,h=r;e>=o?e=o-1:e<0&&(e=0),h>=i?h=i-1:h<0&&(h=0);var d=e*i+h;return d*=4,t[d+n]},E=function(t){var i=t;return i=Math.min(255,i),i=Math.max(0,i)},b=function(t){var i=t;h=i[1][1],d=-.5*i[1][0]+.5*i[1][2],f=i[1][0]-2.5*i[1][1]+2*i[1][2]-.5*i[1][3],v=-.5*i[1][0]+1.5*i[1][1]-1.5*i[1][2]+.5*i[1][3],u=-.5*i[0][1]+.5*i[2][1],c=.25*i[0][0]-.25*i[0][2]-.25*i[2][0]+.25*i[2][2],g=-.5*i[0][0]+1.25*i[0][1]-i[0][2]+.25*i[0][3]+.5*i[2][0]-1.25*i[2][1]+i[2][2]-.25*i[2][3],m=.25*i[0][0]-.75*i[0][1]+.75*i[0][2]-.25*i[0][3]-.25*i[2][0]+.75*i[2][1]-.75*i[2][2]+.25*i[2][3],s=i[0][1]-2.5*i[1][1]+2*i[2][1]-.5*i[3][1],w=-.5*i[0][0]+.5*i[0][2]+1.25*i[1][0]-1.25*i[1][2]-i[2][0]+i[2][2]+.25*i[3][0]-.25*i[3][2],M=i[0][0]-2.5*i[0][1]+2*i[0][2]-.5*i[0][3]-2.5*i[1][0]+6.25*i[1][1]-5*i[1][2]+1.25*i[1][3]+2*i[2][0]-5*i[2][1]+4*i[2][2]-i[2][3]-.5*i[3][0]+1.25*i[3][1]-i[3][2]+.25*i[3][3],l=-.5*i[0][0]+1.5*i[0][1]-1.5*i[0][2]+.5*i[0][3]+1.25*i[1][0]-3.75*i[1][1]+3.75*i[1][2]-1.25*i[1][3]-i[2][0]+3*i[2][1]-3*i[2][2]+i[2][3]+.25*i[3][0]-.75*i[3][1]+.75*i[3][2]-.25*i[3][3],p=-.5*i[0][1]+1.5*i[1][1]-1.5*i[2][1]+.5*i[3][1],y=.25*i[0][0]-.25*i[0][2]-.75*i[1][0]+.75*i[1][2]+.75*i[2][0]-.75*i[2][2]-.25*i[3][0]+.25*i[3][2],I=-.5*i[0][0]+1.25*i[0][1]-i[0][2]+.25*i[0][3]+1.5*i[1][0]-3.75*i[1][1]+3*i[1][2]-.75*i[1][3]-1.5*i[2][0]+3.75*i[2][1]-3*i[2][2]+.75*i[2][3]+.5*i[3][0]-1.25*i[3][1]+i[3][2]-.25*i[3][3],x=.25*i[0][0]-.75*i[0][1]+.75*i[0][2]-.25*i[0][3]-.75*i[1][0]+2.25*i[1][1]-2.25*i[1][2]+.75*i[1][3]+.75*i[2][0]-2.25*i[2][1]+2.25*i[2][2]-.75*i[2][3]-.25*i[3][0]+.75*i[3][1]-.75*i[3][2]+.25*i[3][3]},j=function(t,i){var o=t*t,a=i*i,r=a*i;return h+d*i+f*a+v*r+(u+c*i+g*a+m*r)*t+(s+w*i+M*a+l*r)*o+(p+y*i+I*a+x*r)*(o*t)},T={width:80,height:80,mime:"image/png",processType:0},k={};return function(t){t.scaleImage=function(t,o){var r=t.width,h=t.height,d=e({},T,o),f=[i,a,n],v=document.createElement("canvas"),u=v.getContext("2d");v.width=r,v.height=h,u.drawImage(t,0,0,r,h);var c=u.getImageData(0,0,r,h),g=u.createImageData(d.width,d.height);return g=f[d.processType](c,g,d),v.width=g.width,v.height=g.height,u.putImageData(g,0,0,0,0,v.width,v.height),v.toDataURL(d.mime,.9)}}(k),k});
/*!
 * image-process v0.0.1
 * (c) 2017-2017 dailc
 * Released under the MIT License.
 * https://github.com/dailc/image-process
 */
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):t.ImageProcess=o()}(this,function(){"use strict";function t(t,o,a,r,i,n){for(var e=i/o,h=n/a,f=r,v=0;v<i;v+=1)for(var d=0;d<n;d+=1)!function(r,n){var v=Math.min(o-1,r/e),d=Math.min(a-1,n/h),u=Math.floor(v),c=Math.floor(d),g=n*i+r,m=c*o+u;g*=4,m*=4;for(var M=0;M<=3;M+=1)f[g+M]=t[m+M]}(v,d)}function o(o,a){return t(o.data,o.width,o.height,a.data,a.width,a.height),a}function a(t,o,a,r,i,n){for(var e=i/o,h=n/a,f=r,v=0;v<i;v+=1)for(var d=0;d<n;d+=1)!function(r,n){var v=Math.min(o-1,r/e),d=Math.min(a-1,n/h),u=Math.floor(v),c=Math.floor(d),g=v-u,m=d-c,M=1-g,l=1-m,s=n*i+r,w=c*o+u,p=void 0,y=void 0,I=void 0;y=u<o-1?w+1:w,c<a-1?(p=w+o,I=y+o):(p=w,I=y),s*=4,w*=4,p*=4,y*=4,I*=4;for(var x=0;x<=3;x+=1){var D=m*(M*t[p+x]+g*t[I+x]),E=l*(M*t[w+x]+g*t[y+x]);f[s+x]=D+E}}(v,d)}function r(t,o){return a(t.data,t.width,t.height,o.data,o.width,o.height),o}function i(t,o,a,r,i,n){for(var e=r,h=i/o,f=n/a,v=0;v<i;v+=1)for(var d=0;d<n;d+=1)!function(r,n){var v=Math.min(o-1,r/h),d=Math.min(a-1,n/f),u=Math.floor(v),c=Math.floor(d),g=v-u,m=d-c,M=n*i+r;M*=4;for(var l=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],s=0;s<=3;s+=1){for(var w=-1;w<=2;w+=1)for(var p=-1;p<=2;p+=1)l[w+1][p+1]=k(t,o,a,c+w,u+p,s);C(l),e[M+s]=A(L(m,g))}}(v,d)}function n(t,o){return i(t.data,t.width,t.height,o.data,o.width,o.height),o}function e(t){var o=t>=0?t:-t,a=t*t,r=o*a;return o<=1?1-(O+3)*a+(O+2)*r:o<=2?-4*O+8*O*o-5*O*a+O*r:0}function h(t){var o=t;return o=Math.min(255,o),o=Math.max(0,o)}function f(t,o,a,r,i){var n=r,e=i;n>=a?n=a-1:n<0&&(n=0),e>=o?e=o-1:e<0&&(e=0);var h=n*o+e;return h*=4,[t[h+0],t[h+1],t[h+2],t[h+3]]}function v(t,o,a,r,i,n){for(var v=r,d=i/o,u=n/a,c=0;c<i;c+=1)for(var g=0;g<n;g+=1)!function(r,n){var c=Math.min(o-1,r/d),g=Math.min(a-1,n/u),m=Math.floor(c),M=Math.floor(g),l=c-m,s=g-M,w=n*i+r;w*=4;for(var p=[0,0,0,0],y=-1;y<=2;y+=1)for(var I=-1;I<=2;I+=1){var x=f(t,o,a,M+y,m+I),D=e(y-s)*e(I-l);p[0]+=x[0]*D,p[1]+=x[1]*D,p[2]+=x[2]*D,p[3]+=x[3]*D}v[w+0]=h(p[0]),v[w+1]=h(p[1]),v[w+2]=h(p[2]),v[w+3]=h(p[3])}(c,g)}function d(t,o){return v(t.data,t.width,t.height,o.data,o.width,o.height),o}function u(t){for(var o=t,a=arguments.length,r=Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];return r.forEach(function(t){t&&Object.keys(t).forEach(function(a){o[a]=t[a]})}),o}var c=void 0,g=void 0,m=void 0,M=void 0,l=void 0,s=void 0,w=void 0,p=void 0,y=void 0,I=void 0,x=void 0,D=void 0,E=void 0,b=void 0,j=void 0,T=void 0,k=function(t,o,a,r,i,n){var e=r,h=i;e>=a?e=a-1:e<0&&(e=0),h>=o?h=o-1:h<0&&(h=0);var f=e*o+h;return f*=4,t[f+n]},A=function(t){var o=t;return o=Math.min(255,o),o=Math.max(0,o)},C=function(t){var o=t;c=o[1][1],g=-.5*o[1][0]+.5*o[1][2],m=o[1][0]-2.5*o[1][1]+2*o[1][2]-.5*o[1][3],M=-.5*o[1][0]+1.5*o[1][1]-1.5*o[1][2]+.5*o[1][3],l=-.5*o[0][1]+.5*o[2][1],s=.25*o[0][0]-.25*o[0][2]-.25*o[2][0]+.25*o[2][2],w=-.5*o[0][0]+1.25*o[0][1]-o[0][2]+.25*o[0][3]+.5*o[2][0]-1.25*o[2][1]+o[2][2]-.25*o[2][3],p=.25*o[0][0]-.75*o[0][1]+.75*o[0][2]-.25*o[0][3]-.25*o[2][0]+.75*o[2][1]-.75*o[2][2]+.25*o[2][3],y=o[0][1]-2.5*o[1][1]+2*o[2][1]-.5*o[3][1],I=-.5*o[0][0]+.5*o[0][2]+1.25*o[1][0]-1.25*o[1][2]-o[2][0]+o[2][2]+.25*o[3][0]-.25*o[3][2],x=o[0][0]-2.5*o[0][1]+2*o[0][2]-.5*o[0][3]-2.5*o[1][0]+6.25*o[1][1]-5*o[1][2]+1.25*o[1][3]+2*o[2][0]-5*o[2][1]+4*o[2][2]-o[2][3]-.5*o[3][0]+1.25*o[3][1]-o[3][2]+.25*o[3][3],D=-.5*o[0][0]+1.5*o[0][1]-1.5*o[0][2]+.5*o[0][3]+1.25*o[1][0]-3.75*o[1][1]+3.75*o[1][2]-1.25*o[1][3]-o[2][0]+3*o[2][1]-3*o[2][2]+o[2][3]+.25*o[3][0]-.75*o[3][1]+.75*o[3][2]-.25*o[3][3],E=-.5*o[0][1]+1.5*o[1][1]-1.5*o[2][1]+.5*o[3][1],b=.25*o[0][0]-.25*o[0][2]-.75*o[1][0]+.75*o[1][2]+.75*o[2][0]-.75*o[2][2]-.25*o[3][0]+.25*o[3][2],j=-.5*o[0][0]+1.25*o[0][1]-o[0][2]+.25*o[0][3]+1.5*o[1][0]-3.75*o[1][1]+3*o[1][2]-.75*o[1][3]-1.5*o[2][0]+3.75*o[2][1]-3*o[2][2]+.75*o[2][3]+.5*o[3][0]-1.25*o[3][1]+o[3][2]-.25*o[3][3],T=.25*o[0][0]-.75*o[0][1]+.75*o[0][2]-.25*o[0][3]-.75*o[1][0]+2.25*o[1][1]-2.25*o[1][2]+.75*o[1][3]+.75*o[2][0]-2.25*o[2][1]+2.25*o[2][2]-.75*o[2][3]-.25*o[3][0]+.75*o[3][1]-.75*o[3][2]+.25*o[3][3]},L=function(t,o){var a=t*t,r=o*o,i=r*o;return c+g*o+m*r+M*i+(l+s*o+w*r+p*i)*t+(y+I*o+x*r+D*i)*a+(E+b*o+j*r+T*i)*(a*t)},O=-1,P={width:80,height:80,mime:"image/png",processType:0},R={};return function(t){t.scaleImage=function(t,a){var i=t.width,e=t.height,h=u({},P,a),f=[o,r,n,d],v=document.createElement("canvas"),c=v.getContext("2d");v.width=i,v.height=e,c.drawImage(t,0,0,i,e);var g=c.getImageData(0,0,i,e),m=c.createImageData(h.width,h.height);return m=f[h.processType](g,m,h),v.width=m.width,v.height=m.height,c.putImageData(m,0,0,0,0,v.width,v.height),console.log(g),console.log(m),v.toDataURL(h.mime,.9)}}(R),R});